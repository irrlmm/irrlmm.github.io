---
import Image from "astro/components/Image.astro";
import getImage from "../helpers/getImage";

interface Props {
  text: string;
  inlineImageSrc?: string;
}

const { text, inlineImageSrc } = Astro.props;
---

<p>
  {
    text.split(" ").map((word) => (
      <>
        <span>{word}</span>{" "}
      </>
    ))
  }

  {
    inlineImageSrc && (
      <Image
        src={getImage(inlineImageSrc)()}
        widths={[128, 256]}
        layout="full-width"
        width={128}
        loading="eager"
        alt="Inline decoration"
      />
    )
  }
</p>

<style>
  p {
    text-wrap: pretty;
  }
  p > * {
    animation: appear 0.1s var(--bezier) 0.2s both;
  }
  p > *:nth-child(2) {
    animation-delay: 0.25s;
  }
  p > *:nth-child(3) {
    animation-delay: 0.3s;
  }
  p > *:nth-child(4) {
    animation-delay: 0.35s;
  }
  p > *:nth-child(5) {
    animation-delay: 0.4s;
  }
  p > *:nth-child(6) {
    animation-delay: 0.45s;
  }
  p > *:nth-child(7) {
    animation-delay: 0.5s;
  }
  p > *:nth-child(8) {
    animation-delay: 0.525s;
  }
  p > *:nth-child(9) {
    animation-delay: 0.55s;
  }
  p > *:nth-child(10) {
    animation-delay: 0.575s;
  }
  p > *:nth-child(11) {
    animation-delay: 0.6s;
  }
  p > *:nth-child(12) {
    animation-delay: 0.625s;
  }
  p > *:nth-child(13) {
    animation-delay: 0.65s;
  }
  p > *:nth-child(14) {
    animation-delay: 0.675s;
  }
  p > *:nth-child(n + 15) {
    animation-delay: 0.7s;
  }

  img {
    width: var(--unit-m);
    border-radius: 5%;
    vertical-align: middle;
    transform: translateY(calc(-0.1 * var(--unit-m)));
    transition: transform 0.125s var(--bezier);
  }
  img:hover {
    transform: scale(3);
  }
</style>
